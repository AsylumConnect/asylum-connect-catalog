{% extends 'layouts/base.html' %}
{% import 'macros/form_macros.html' as f %}

{% block content %}
    <div class="ui stackable centered grid container">
        <div class="twelve wide column">
            <h2 class="ui header">
                Upload
            </h2>
            <p>
                The "Reset" mode clears all data in the database
                and sets up a new schema based on the contents of the csv.
                In contrast, the "Update" model only adds resources or updates existing
                resources. In the case when a resource in the csv already
                exists in the database, its data will be replaced with the
                data in the csv.
            </p>
            <form id="csv-upload-form" class="ui form">
                <div class="field">
                    <label for="csv">CSV File</label>
                    <!-- only allow .csv file types -->
                    <input id="csv-file" name="csv" placeholder="CSV File" type="file" accept=".csv">
                </div>
                <div class="inline fields">
                  <div class="field">
                    <div class="ui radio checkbox">
                      <input type="radio" id="reset" name="reset-or-update" checked="" tabindex="0" class="hidden">
                      <label>Reset</label>
                    </div>
                  </div>
                  <div class="field">
                    <div class="ui radio checkbox">
                      <input type="radio" id="update" name="reset-or-update" tabindex="0" class="hidden">
                      <label>Update</label>
                    </div>
                  </div>
                </div>
                <button class="ui disabled button" type="submit" id="upload-button">Upload</button>
            </form>
            <h3 class="ui header">Upload Progress</h3>
            <div class="ui progress" id="upload-progress">
              <div class="bar">
                <div class="progress"></div>
              </div>
              <div class="label">Parsing CSV File...</div>
            </div>
            <div class="ui horizontal segments" id="progress-msgs">
              <div class="ui segment">
                <h5 class="ui header green">Success Messages</h5>
                <div class="ui list" id="status-success"></div>
              </div>
              <div class="ui segment">
                <h5 class="ui header red">Error Messages</h5>
                <div class="ui list" id="status-errors"></div>
              </div>
            </div>
        </div>
    </div>

  <script type="text/javascript">
    $(document).ready(function() {
      initializeUpload();
    });
  </script>
{% endblock %}
